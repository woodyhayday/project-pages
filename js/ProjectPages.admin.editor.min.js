function projectPages_select_gradient(e){jQuery("#whpp_headerbg_gradient").val(e),jQuery("#pp-gradient-example-wrap").removeClass().addClass("d-flex align-items-center pp-gradient-"+e),jQuery("#pp-gradient-example span").text(e)}function projectPages_render_logs(){var t;window.projectPages_render_blocker||(window.projectPages_render_blocker=!0,window.projectPages_logs&&window.projectPages_logs.length&&(window.projectPages_logs.sort(projectPages_logs_sort_by_date),t="",jQuery.each(window.projectPages_logs,function(e,o){t+='<a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 project-pages-single-log" aria-current="true" data-logid="'+o.ID+'"><span class="dashicons '+o.icon+'"></span><div class="d-flex gap-2 w-100 justify-content-between"><div><h3>'+o.title+'</h3><div class="mb-0 opacity-75 project-pages-3-lines">'+projectPages_decodeHtml(o.body)+'</div></div><small class="opacity-50 text-nowrap">'+o.date+"</small></div></a>"}),jQuery("#project-pages-no-logs").hide(),jQuery("#project-pages-log-wrap").html(t),jQuery("#project-pages-log-outer-wrap").show(),setTimeout(function(){jQuery(".project-pages-single-log").each(function(e){var o=jQuery(this).attr("data-logid");jQuery(this).click(function(){return projectPages_open_log_edit_modal(o),!1})})},0)),window.projectPages_render_blocker=!1)}function projectPages_open_log_edit_modal(e){var o,t,a,r=projectPages_get_log(e);r&&(o="","string"==typeof r.body&&(o=r.body),t="project_page_edit_log_body",(a=tinyMCE.get(t))?a.getContent():jQuery("#"+t).val(),jQuery("#project-pages-edit-log-id").val(e),jQuery("#project-pages-edit-log-title").val(r.title),jQuery("#project-pages-edit-log-date").val(r.date),jQuery("#project-pages-edit-log-dashicon").val(r.icon),dashiconsPickerChange("#project-pages-edit-log-dashicon",r.icon),a?a.setContent(projectPages_decodeHtml(o)):jQuery("#project_page_edit_log_body").val(projectPages_decodeHtml(o)),window.projectPages_log_editor_modal.show())}function projectPages_get_log(t){var a=!1;return jQuery.each(window.projectPages_logs,function(e,o){o.ID==t&&(a=o)}),a}function projectPages_add_new_log(){var e=jQuery("#project-pages-add-log-title").val(),o=jQuery("#project-pages-add-log-date").val(),t=jQuery("#project-pages-log-dashicon").val(),a=tinyMCE.get("project_page_add_log_body").getContent();projectPages_add_new_log_post({post_id:window.projectPages_post_id,title:e,date:o,body:a,icon:t,nonce:window.projectPages_log_nonce},function(e){projectPages_render_logs();var o=document.getElementById("project-pages-add-log-modal");bootstrap.Modal.getInstance(o).hide(),jQuery("#project-pages-add-log-title").val(""),jQuery("#project-pages-add-log-date").val(""),jQuery("#project-pages-add-log-dashicon").val("dashicons-arrow-right"),dashiconsPickerChange("#project-pages-log-dashicon","dashicons-arrow-right"),tinyMCE.get("project_page_add_log_body").setContent("")},function(e){})}function projectPages_update_log(){var e=jQuery("#project-pages-edit-log-id").val(),o=jQuery("#project-pages-edit-log-title").val(),t=jQuery("#project-pages-edit-log-date").val(),a=jQuery("#project-pages-edit-log-dashicon").val();projectPages_update_log_post({post_id:e,title:o,date:t,body:tinyMCE.get("project_page_edit_log_body").getContent(),icon:a,nonce:window.projectPages_log_nonce},function(e){projectPages_render_logs(),window.projectPages_log_editor_modal.hide(),jQuery("#project-pages-edit-log-id").val(""),jQuery("#project-pages-edit-log-title").val(""),jQuery("#project-pages-edit-log-date").val(""),jQuery("#project-pages-edit-log-dashicon").val("dashicons-arrow-right"),dashiconsPickerChange("#project-pages-edit-log-dashicon","dashicons-arrow-right"),tinyMCE.get("project_page_edit_log_body").setContent("")},function(e){})}function projectPages_delete_log_prompt(e){jQuery("#project-pages-delete-this-log").val(e),window.projectPages_log_editor_modal.hide(),window.projectPages_log_delete_prompt_modal.show()}function projectPages_delete_log(){projectPages_delete_log_post({post_id:jQuery("#project-pages-delete-this-log").val(),nonce:window.projectPages_log_nonce},function(e){projectPages_render_logs(),window.projectPages_log_delete_prompt_modal.hide(),jQuery("#project-pages-delete-this-log").val("")},function(e){})}function projectPages_add_new_log_post(e,o,t){window.projectPages_ajax_blocker||(window.projectPages_ajax_blocker=!0,jQuery.extend(e,{action:"projectPagesAddLog"}),jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.projectPages_logs.push(e),"function"==typeof o&&o(e),window.projectPages_ajax_blocker=!1},error:function(e){console.error("Error: ",e),"function"==typeof t&&t(e),window.projectPages_ajax_blocker=!1}}))}function projectPages_update_log_post(e,o,t){window.projectPages_ajax_blocker||(window.projectPages_ajax_blocker=!0,jQuery.extend(e,{action:"projectPagesUpdateLog"}),jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){projectPages_logs_update_log_local(e),"function"==typeof o&&o(e),window.projectPages_ajax_blocker=!1},error:function(e){console.error("Error: ",e),"function"==typeof t&&t(e),window.projectPages_ajax_blocker=!1}}))}function projectPages_delete_log_post(e,o,t){window.projectPages_ajax_blocker||(window.projectPages_ajax_blocker=!0,jQuery.extend(e,{action:"projectPagesDeleteLog"}),jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){projectPages_logs_remove_log_local(e),"function"==typeof o&&o(e),window.projectPages_ajax_blocker=!1},error:function(e){console.error("Error: ",e),"function"==typeof t&&t(e),window.projectPages_ajax_blocker=!1}}))}function projectPages_hide_feedback(){var e;window.projectPages_ajax_blocker||(window.projectPages_ajax_blocker=!0,e={action:"projectPagesHideFeedback",nonce:window.projectPages_feedback_nonce},jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.projectPages_ajax_blocker=!1},error:function(e){window.projectPages_ajax_blocker=!1}})),jQuery("#pp_feedback").remove()}function projectPages_logs_update_log_local(t){var a=[];jQuery.each(window.projectPages_logs,function(e,o){o.ID==t.ID?a.push(t):a.push(o)}),window.projectPages_logs=a}function projectPages_logs_remove_log_local(t){var a=[];jQuery.each(window.projectPages_logs,function(e,o){o.ID!=t.ID&&a.push(o)}),window.projectPages_logs=a}function projectPages_log_editor_bind(){window.projectPages_log_editor_modal=new bootstrap.Modal(document.getElementById("project-pages-edit-log-modal"),{keyboard:!1}),window.projectPages_log_delete_prompt_modal=new bootstrap.Modal(document.getElementById("project-pages-delete-log"),{keyboard:!1})}function dashiconsPickerChange(e,o){"#project-pages-log-dashicon"==e?jQuery("#project-pages-log-dashicon-icon").removeClass().addClass("dashicons "+o):"#project-pages-edit-log-dashicon"==e&&jQuery("#project-pages-edit-log-dashicon-icon").removeClass().addClass("dashicons "+o)}function projectPages_decodeHtml(e){var o=document.createElement("textarea");return o.innerHTML=e,o.value}function projectPages_logs_sort_by_date(e,o){return e.timestamp<o.timestamp?-1:e.timestamp>o.timestamp?1:0}function projectPages_date_toTimestamp(e){return Date.parse(e)/1e3}jQuery(document).ready(function(){jQuery("#_submitdiv").attr("id","submitdiv"),jQuery("#project-pages-add-log-datepicker").datepicker({format:"mm/dd/yyyy",orientation:"bottom left",autoclose:!0}),jQuery("#project-pages-edit-log-datepicker").datepicker({format:"mm/dd/yyyy",orientation:"bottom left",autoclose:!0}),jQuery("#whpp_headerimg").on("change",function(){switch(jQuery(".wh-headerimg-cascade").hide(),parseInt(jQuery(this).find(":selected").val())){case-1:break;case 1:jQuery("#headerbg").show();break;case 2:jQuery("#headerbg_imgurl").show();break;case 3:jQuery("#headerbg_vidurl").show();break;case 4:jQuery("#headerbg_gradient").show()}}),jQuery("#project-pages-add-log-submit").click(function(){projectPages_add_new_log()}),jQuery("#project-pages-edit-log-submit").click(function(){projectPages_update_log()}),jQuery("#project-pages-edit-log-delete").click(function(){projectPages_delete_log_prompt(jQuery("#project-pages-edit-log-id").val())}),jQuery("#project-pages-delete-log-certain").click(function(){projectPages_delete_log()}),jQuery("#project-pages-delete-log-cancel").click(function(){window.projectPages_log_delete_prompt_modal.hide(),window.projectPages_log_editor_modal.show()}),jQuery("#project-pages-hide-feedback").click(function(){projectPages_hide_feedback()}),projectPages_render_logs(),projectPages_log_editor_bind()});